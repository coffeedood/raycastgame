<!DOCTYPE html>
<html>
<head>
  <title>Minecraft-Like Blocks</title>
  <style>
    body { margin: 0; background: #222; overflow: hidden; }
    canvas { display: block; margin: 0 auto; background: #333; }
  </style>
</head>
<body>
<canvas id="gameCanvas" width="1000" height="600"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

const mapWidth = 20;
const mapHeight = 20;

// Generate terrain with varying heights
const world = [];
for (let y = 0; y < mapHeight; y++) {
  const row = [];
  for (let x = 0; x < mapWidth; x++) {
    const height = Math.floor(Math.random() * 4); // 0 to 3 blocks high
    row.push(height);
  }
  world.push(row);
}

// Isometric projection settings
const TILE_WIDTH = 64;
const TILE_HEIGHT = 32;
const BLOCK_HEIGHT = 16;

let camX = 0;
let camY = 0;

// Convert tile to isometric screen position
function isoX(x, y) {
  return (x - y) * TILE_WIDTH / 2 + canvas.width / 2 + camX;
}

function isoY(x, y, z) {
  return (x + y) * TILE_HEIGHT / 2 - z * BLOCK_HEIGHT + camY;
}

function drawBlock(x, y, z) {
  const sx = isoX(x, y);
  const sy = isoY(x, y, z);

  // Top
  ctx.fillStyle = "#4caf50";
  ctx.beginPath();
  ctx.moveTo(sx, sy);
  ctx.lineTo(sx + TILE_WIDTH / 2, sy + TILE_HEIGHT / 2);
  ctx.lineTo(sx, sy + TILE_HEIGHT);
  ctx.lineTo(sx - TILE_WIDTH / 2, sy + TILE_HEIGHT / 2);
  ctx.closePath();
  ctx.fill();

  // Left
  ctx.fillStyle = "#388e3c";
  ctx.beginPath();
  ctx.moveTo(sx - TILE_WIDTH / 2, sy + TILE_HEIGHT / 2);
  ctx.lineTo(sx, sy + TILE_HEIGHT);
  ctx.lineTo(sx, sy + TILE_HEIGHT + BLOCK_HEIGHT);
  ctx.lineTo(sx - TILE_WIDTH / 2, sy + TILE_HEIGHT / 2 + BLOCK_HEIGHT);
  ctx.closePath();
  ctx.fill();

  // Right
  ctx.fillStyle = "#2e7d32";
  ctx.beginPath();
  ctx.moveTo(sx, sy + TILE_HEIGHT);
  ctx.lineTo(sx + TILE_WIDTH / 2, sy + TILE_HEIGHT / 2);
  ctx.lineTo(sx + TILE_WIDTH / 2, sy + TILE_HEIGHT / 2 + BLOCK_HEIGHT);
  ctx.lineTo(sx, sy + TILE_HEIGHT + BLOCK_HEIGHT);
  ctx.closePath();
  ctx.fill();
}

function drawWorld() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  for (let y = 0; y < mapHeight; y++) {
    for (let x = 0; x < mapWidth; x++) {
      let h = world[y][x];
      for (let z = 0; z <= h; z++) {
        drawBlock(x, y, z);
      }
    }
  }
}

// Arrow key movement
document.addEventListener("keydown", (e) => {
  const step = 20;
  if (e.key === "ArrowLeft") camX += step;
  if (e.key === "ArrowRight") camX -= step;
  if (e.key === "ArrowUp") camY += step;
  if (e.key === "ArrowDown") camY -= step;
  drawWorld();
});

drawWorld();
</script>
</body>
</html>
